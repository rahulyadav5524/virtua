import{j as q}from"./jsx-runtime-DCrfGL6_.js";import{r as R}from"./index-98wxwTcn.js";import{r as me}from"./index-SCI4cgSJ.js";const H=Math.min,A=Math.max,ne=Math.abs,pe=Array.isArray,Q=setTimeout,ie=(e,t,n)=>H(n,A(t,e)),Z=e=>e!=null,le=e=>[...e].sort((t,n)=>t-n),ce=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},te=e=>{let t,n;return(...r)=>(t||(t=!0,n=e(...r)),n)},V=-1,J=(e,t,n)=>{const r=n?"unshift":"push";for(let s=0;s<t;s++)e[r](V);return e},G=(e,t)=>{const n=e.t[t];return n===V?e.o:n},ve=(e,t,n)=>{const r=e.t[t]===V;return e.t[t]=n,e.i=H(t,e.i),r},ee=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let n=e.i,r=e.u[n];for(;n<t;)r+=G(e,n),e.u[++n]=r;return e.i=t,r},re=(e,t,n)=>{for(;n>=0&&n<e.l;){const r=ee(e,n);if(r<=t){if(r+G(e,n)>t)break;n++}else n--}return ie(n,0,e.l-1)},oe=(e,t,n)=>{const r=t-e.l;return e.i=n?-1:H(t-1,e.i),e.l=t,r>0?(J(e.u,r),J(e.t,r,n),e.o*r):(e.u.splice(r),(n?e.t.splice(0,-r):e.t.splice(r)).reduce((s,c)=>s-(c===V?e.o:c),0))},ue=typeof window<"u",ae=()=>document.documentElement,ye=e=>e.ownerDocument,ge=e=>e.defaultView,fe=te(()=>!!ue&&getComputedStyle(ae()).direction==="rtl"),de=te(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),we=te(()=>"scrollBehavior"in ae().style),xe=e=>A(e.h(),e._()),be=(e,t,n,r,s)=>(r!==1&&(e-=A(0,n)),r!==2&&(t+=A(0,n)),[A(e,0),H(t,s-1)]),ke=(e,t=40,n=0,r,s=!1)=>{let c=!!n,u=[],a=0,o=0,l=0,h=0,d=0,f=0,w=0,C=0,S=0,E=c?[0,A(n-1,0)]:null,m=[0,0],x=0;const p=((i,y,b)=>({o:b?b[1]:y,t:b&&b[0]?J(b[0].slice(0,H(i,b[0].length)),A(0,i-b[0].length)):J([],i),l:i,i:-1,u:J([],i)}))(e,t,r),Y=new Set,X=()=>l-o,F=i=>((y,b,D,L)=>{const j=re(y,b,H(D,y.l-1));return[j,re(y,b+L,j)]})(p,i,m[0],a),v=()=>(i=>i.l?ee(i,i.l-1)+G(i,i.l-1):0)(p),W=i=>ee(p,i)-f,z=i=>G(p,i),B=i=>{i&&(de()&&C!==0?f+=i:(d+=i,h++))};return{p:()=>u,v:()=>(i=>[[...i.t],i.o])(p),m:()=>w?m:(m=F(A(0,X()+f+d)),E?[H(m[0],E[0]),A(m[1],E[1])]:m),S:i=>p.t[i]===V,I:()=>!!E&&p.t.slice(A(0,E[0]-1),H(p.l-1,E[1]+1)+1).includes(V),k:W,R:z,C:()=>p.l,M:()=>l,T:()=>C,_:()=>a,H:()=>o,h:v,W:()=>h,J:()=>(w=d,d=0,[w,S===2]),B(i,y){const b=[i,y];return Y.add(b),()=>{Y.delete(b)}},O(i,y){let b,D,L=0;switch(i){case 1:{const j=w;w=0;const g=y-l,M=ne(g);j&&M<ne(j)+1||S!==0||(C=g<0?2:1),c&&(E=null,c=!1),l=y,L=4;const O=X();O>=-a&&O<=v()&&(L+=1,D=M>a);break}case 2:L=8,C!==0&&(b=!0,L+=1),C=0,S=0,E=null;break;case 3:{const j=y.filter(([g,M])=>p.t[g]!==M);if(!j.length)break;B(j.reduce((g,[M,O])=>((S===2||(E?M<E[0]:W(M)+(C===0&&S===0?z(M):0)<X()))&&(g+=O-z(M)),g),0));for(const[g,M]of j){const O=z(g),P=ve(p,g,M);s&&(x+=M,P||(x-=O))}s&&a&&x>a&&(B(((g,M)=>{let O=0;const P=g.t.filter((T,I)=>{const $=T!==V;return $&&I<M&&O++,$}),k=g.o;return g.i=-1,((g.o=(T=>{const I=le(T),$=T.length/2|0;return I.length%2==0?(I[$-1]+I[$])/2:I[$]})(P))-k)*A(M-O,0)})(p,m[0])),s=!1),L=3,D=!0;break}case 4:a!==y&&(a=y,L=3);break;case 5:y[1]?(B(oe(p,y[0],!0)),S=2,L=1):oe(p,y[0]);break;case 6:o=y;break;case 7:S=1;break;case 8:E=F(y),L=1}L&&(u=[],b&&f&&(d+=f,f=0,h++),Y.forEach(([j,g])=>{L&j&&g(D)}))}}},U=ue?R.useLayoutEffect:R.useEffect,N=(e,t)=>t&&fe()?-e:e,Re=(e,t,n,r,s,c)=>{const u=Date.now;let a=0,o=!1,l=!1,h=!1,d=!1;const f=(()=>{let m;const x=()=>{Z(m)&&clearTimeout(m)},p=()=>{x(),m=Q(()=>{m=null,(()=>{if(o||l)return o=!1,void f();h=!1,e.O(2)})()},150)};return p.L=x,p})(),w=()=>{a=u(),h&&(d=!0),e.O(1,r()),f()},C=m=>{if(o||e.T()===0||m.ctrlKey)return;const x=u()-a;150>x&&50<x&&(n?m.deltaX:m.deltaY)&&(o=!0)},S=()=>{l=!0,h=d=!1},E=()=>{l=!1,de()&&(h=!0)};return t.addEventListener("scroll",w),t.addEventListener("wheel",C,{passive:!0}),t.addEventListener("touchstart",S,{passive:!0}),t.addEventListener("touchend",E,{passive:!0}),{$:()=>{t.removeEventListener("scroll",w),t.removeEventListener("wheel",C),t.removeEventListener("touchstart",S),t.removeEventListener("touchend",E),f.L()},A:()=>{const[m,x]=e.J();m&&(s(N(m,n),x,d),d=!1,x&&e._()>e.h()&&e.O(1,r()))}}},Ee=(e,t)=>{let n,r,s;const c=t?"scrollLeft":"scrollTop",u=t?"overflowX":"overflowY",a=async(o,l)=>{if(!n)return void ce(()=>a(o,l));s&&s();const h=()=>{let d;return[new Promise((f,w)=>{d=f,Q(s=w,150)}),e.B(2,()=>{d&&d()})]};if(l&&we()){for(;e.O(8,o()),e.I();){const[d,f]=h();try{await d}catch{return}finally{f()}}n.scrollTo({[t?"left":"top"]:N(o(),t),behavior:"smooth"})}else for(;;){const[d,f]=h();try{n[c]=N(o(),t),e.O(7),await d}catch{return}finally{f()}}};return{D(o){n=o,r=Re(e,o,t,()=>N(o[c],t),(l,h,d)=>{if(d){const f=o.style,w=f[u];f[u]="hidden",Q(()=>{f[u]=w})}h?(o[c]=e.M()+l,s&&s()):o[c]+=l})},$(){r&&r.$()},P(o){a(()=>o)},V(o){o+=e.M(),a(()=>o)},X(o,{align:l,smooth:h,offset:d=0}={}){if(o=ie(o,0,e.C()-1),l==="nearest"){const f=e.k(o),w=e.M();if(f<w)l="start";else{if(!(f+e.R(o)>w+e._()))return;l="end"}}a(()=>d+e.H()+e.k(o)+(l==="end"?e.R(o)-e._():l==="center"?(e.R(o)-e._())/2:0),h)},A:()=>{r&&r.A()}}},_="current",he=(e,t)=>{if(pe(e))for(const n of e)he(n,t);else Z(e)&&typeof e!="boolean"&&t.push(e)},Me=(e,t)=>{const n=e.key;return Z(n)?n:"_"+t},Te=e=>{const t=R.useRef();return t[_]||(t[_]=e())},se=e=>{const t=R.useRef(e);return U(()=>{t[_]=e},[e]),t},Se=e=>{let t;return{D(n){(t||(t=new(ge(ye(n))).ResizeObserver(e))).observe(n)},Y(n){t.unobserve(n)},$(){t&&t.disconnect()}}},Le=(e,t)=>{let n;const r=t?"width":"height",s=new WeakMap,c=Se(u=>{const a=[];for(const{target:o,contentRect:l}of u)if(o.offsetParent)if(o===n)e.O(4,l[r]);else{const h=s.get(o);Z(h)&&a.push([h,l[r]])}a.length&&e.O(3,a)});return{j(u){c.D(n=u)},q:(u,a)=>(s.set(u,a),c.D(u),()=>{s.delete(u),c.Y(u)}),$:c.$}},je=R.memo(({U:e,F:t,G:n,K:r,N:s,Z:c,ee:u,te:a})=>{const o=R.useRef(null);U(()=>t(o[_],n),[n]);const l=R.useMemo(()=>{const h={margin:0,padding:0,position:s&&a?void 0:"absolute",[u?"height":"width"]:"100%",[u?"top":"left"]:0,[u?fe()?"right":"left":"top"]:r,visibility:!s||a?"visible":"hidden"};return u&&(h.display="flex"),h},[r,s,a]);return q.jsx(c,typeof c=="string"?{ref:o,style:l,children:e}:{ref:o,style:l,index:n,children:e})}),Ce=e=>R.useReducer(e.p,void 0,e.p)[1],Ie=(e,t)=>R.useMemo(()=>{if(typeof e=="function")return[e,t||0];const n=(r=>{const s=[];return he(r,s),s})(e);return[r=>n[r],n.length]},[e,t]),Oe=R.forwardRef(({children:e,count:t,overscan:n=4,keepMounted:r,itemSize:s,shift:c,horizontal:u,cache:a,startMargin:o=0,ssrCount:l,as:h="div",item:d="div",scrollRef:f,onScroll:w,onScrollEnd:C,onRangeChange:S},E)=>{const[m,x]=Ie(e,t),p=R.useRef(null),Y=R.useRef(!!l),X=se(w),F=se(C),[v,W,z,B]=Te(()=>{const k=!!u,T=ke(x,s,l,a,!s);return[T,Le(T,k),Ee(T,k),k]});x!==v.C()&&v.O(5,[x,c]),o!==v.H()&&v.O(6,o);const i=Ce(v),[y,b]=v.m(),D=v.T(),L=v.W(),j=v.h(),g=[],[M,O]=be(y,b,n,D,x),P=k=>{const T=m(k);return q.jsx(je,{F:W.q,G:k,K:v.k(k),N:v.S(k),Z:d,U:T,ee:B,te:Y[_]},Me(T,k))};U(()=>{Y[_]=!1;const k=v.B(1,K=>{K?me.flushSync(i):i()}),T=v.B(4,()=>{X[_]&&X[_](v.M())}),I=v.B(8,()=>{F[_]&&F[_]()}),$=K=>{W.j(K),z.D(K)};return f?ce(()=>$(f[_])):$(p[_].parentElement),()=>{k(),T(),I(),W.$(),z.$()}},[]),U(()=>{z.A()},[L]),R.useEffect(()=>{S&&S(y,b)},[y,b]),R.useImperativeHandle(E,()=>({get cache(){return v.v()},get scrollOffset(){return v.M()},get scrollSize(){return xe(v)},get viewportSize(){return v._()},getItemOffset:v.k,scrollToIndex:z.X,scrollTo:z.P,scrollBy:z.V}),[]);for(let k=M,T=O;k<=T;k++)g.push(P(k));if(r){const k=[],T=[];le(r).forEach(I=>{I<M&&k.push(P(I)),I>O&&T.push(P(I))}),g.unshift(...k),g.push(...T)}return q.jsx(h,{ref:p,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:B?j:"100%",height:B?"100%":j,pointerEvents:D!==0?"none":"auto"},children:g})}),_e=R.forwardRef(({children:e,count:t,overscan:n,keepMounted:r,itemSize:s,shift:c,horizontal:u,reverse:a,cache:o,ssrCount:l,item:h,onScroll:d,onScrollEnd:f,onRangeChange:w,style:C,...S},E)=>{const m=R.useRef(null),x=a&&!u;let p=q.jsx(Oe,{ref:E,scrollRef:x?m:void 0,count:t,overscan:n,keepMounted:r,itemSize:s,shift:c,horizontal:u,cache:o,ssrCount:l,item:h,onScroll:d,onScrollEnd:f,onRangeChange:w,children:e});return x&&(p=q.jsx("div",{style:{visibility:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"},children:p})),q.jsx("div",{ref:m,...S,style:{display:u?"inline-block":"block",[u?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%",...C},children:p})}),ze=R.memo(({count:e,Component:t,handle:n})=>{const r=R.useRef(null);return R.useImperativeHandle(n,()=>({scrollToIndex:s=>{var c;(c=r.current)==null||c.scrollToIndex(s)}})),q.jsx(_e,{ref:r,children:Array.from({length:e}).map((s,c)=>q.jsx(t,{index:c},c))})});ze.__docgenInfo={description:"",methods:[{name:"scrollToIndex",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:null}],returns:null}],displayName:"VirtuaList",props:{count:{required:!0,tsType:{name:"number"},description:""},Component:{required:!0,tsType:{name:"SimpleItem"},description:""},handle:{required:!1,tsType:{name:"Ref",elements:[{name:"signature",type:"object",raw:"{ scrollToIndex: (index: number) => void }",signature:{properties:[{key:"scrollToIndex",value:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}},required:!0}}]}}],raw:"Ref<ListHandle>"},description:""}}};export{ze as V};
